<!doctype html>
<html lang="en">

  <head>
    <title>My project</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/CETEIcean.css" media="all" />
    <link rel="stylesheet" href="css/style.css" media="all" />
    <script src="js/CETEI.js"></script>
    <script src="js/verovio.js"></script>
  </head>

  <body>

    <div id="MEImeta"></div>
    <div id="MEI"></div>

    <script>
      // Get, parse and show MEI header data
      var CETEI4MEI = new CETEI()
      CETEI4MEI.addBehaviors({
        namespaces: {
          mei: "http://www.music-encoding.org/ns/mei"
        }
      })
      CETEI4MEI.getHTML5("data/example.mei", function(data) {
        // get header
        var meiHead = data.querySelector('mei-meiHead')
        document.getElementById("MEImeta").appendChild(meiHead)
      })
      var vrvToolkit = new verovio.toolkit()
      vrvToolkit.setOptions(options = {
          pageHeight: 1000,
          pageWidth: 1000,
          ignoreLayout: 1,
          border: 20,
          scale: 50,
          noHeader: true,
          adjustPageHeight: true
      })
      fetch("data/example.mei").then(function( response ) {
          response.text().then(function( data ) {
            vrvToolkit.loadData(data)
            // Show all pages
            var score = ''
            for (let p of Array.from({length: vrvToolkit.getPageCount()}, (x,i) => i + 1)) {
              score += vrvToolkit.renderPage(p)
            }
            document.getElementById('MEI').innerHTML = score
          })
      })
    </script>
  </body>

</html>
